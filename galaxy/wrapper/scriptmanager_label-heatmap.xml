<tool id="scriptmanager_label-heatmap" name="ScriptManager: Label Heatmap" version="1.0.0">
    <description>Create an SVG label for heatmap inputs.</description>
    <macros>
        <import>scriptmanager_macros.xml</import>
    </macros>
    <requirements>
        <requirement type="package" version="8.0.112">openjdk</requirement>
    </requirements>
    
    <command detect_errors="exit_code"><![CDATA[
            java -jar $__tool_directory__/ScriptManager-v0.14.jar figure-generation label-heatmap
            
            #if str($heatmap_color.color) == "h_color" :
                -c "$heatmap_color.color_h"
            #else:
                -c "$heatmap_color.hex_h"
            #end if

            -f "$font_size"
            -l "$left_x_tickmark_label"
            -m "$mid_x_tickmark_label"
            -o "$output_img"
            -r "$right_x_tickmark_label"
            -t "$x_tickmark_height"
	        -w "$border_width"
	        -x "$x_axis_label"
	        -y "$y_axis_label"

            '$input_img'
    ]]></command>
    <inputs>
        <param name="input_img" type="data" format="png" label="Input image in PNG format" />

        <conditional name="heatmap_color">
            <param name="color" type="select" label="Select color or specify hexadecimal color code?">
                <option value="h_color" selected="True">select color</option>
                <option value="h_hex" >specify hexadecimal color code</option>
            </param>

            <when value="h_color">
                <param name="color_h" type="select" label="Color">
                    <expand macro="color_selector_default_black" />
                </param>
            </when>

            <when value="h_hex">
                <param name="hex_h" type="text" value="000000" label="Hexadecimal code" />
            </when>

        </conditional>

        <param name="border_width" type="integer" value="2" label="Border width" />
        <param name="x_tickmark_height" type="integer" value="10" label="Height of X axis tickmarks" />
        <param name="font_size" type="integer" value="18" label="Font size" />
        <param name="left_x_tickmark_label" type="integer" optional="true" label="Label on the left most tickmark of the X axis (integer)" />
        <param name="mid_x_tickmark_label" type="integer" optional="true" label="Label on the midpoint tickmark of the X axis (integer)" />
        <param name="right_x_tickmark_label" type="integer" optional="true" label="Label on the right most tickmark of the X axis (integer)" />
        <param name="x_axis_label" type="text" optional="true" label="X axis label" />
        <param name="y_axis_label" type="text" optional="true" label="Y axis label" />

    </inputs>

    <outputs>
        <data name="output_img" format="svg"  label="${tool.name} on ${on_string}"/>
    </outputs>
    <tests>
    </tests>
    <help>
**What it does**
This tool adds annotation to the heatmap plot generated by ScriptManager
    </help>

</tool>
